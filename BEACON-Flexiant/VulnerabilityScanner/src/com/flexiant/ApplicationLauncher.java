package com.flexiant;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;

import org.apache.log4j.LogManager;
import org.apache.log4j.Logger;
import org.apache.logging.log4j.core.config.ConfigurationSource;
import org.apache.logging.log4j.core.config.Configurator;


public class ApplicationLauncher {
	
	private static Logger LOGGER = LogManager.getLogger(ApplicationLauncher.class);
	private static String configFile = "log4j2.xml";
	
    // The configuration file is placed in the user directory.
    // TODO to include the configuration file in the project. 
	static {
		String log4jConfigFile = System.getProperty("user.dir") + File.separator + configFile;
    	System.out.println("User.dir:" + System.getProperty("user.dir"));
    	ConfigurationSource source;
		try {
			source = new ConfigurationSource(new FileInputStream(log4jConfigFile));
			Configurator.initialize(null, source);
		} catch (FileNotFoundException e) {
			LOGGER.error("Logging configuration file was not found", e);
		} catch (IOException e) {
			LOGGER.error("Error - when trying to obtain the logging configuration file", e);
		}
	}
   
	public static void main(String[] args) {
	    FCOListener listener = FCOListener.getInstance();
        LOGGER.info("Try to listen using socket");
        listener.readFromSocket();
    }
}

